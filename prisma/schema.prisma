generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          Int           @id @default(autoincrement())
  name        String
  email       String        @unique
  password    String
  twoFa       Boolean       @default(false)
  code_2fa    String?
  Transaction Transaction[]
  ActivityLog ActivityLog[]
}

enum TransactionType {
  INGRESO
  GASTO
}

enum ActionType {
  CREAR_TRANSACCION
  ACTUALIZAR_TRANSACCION
  ELIMINAR_TRANSACCION
  INICIO_SESION
  CIERRE_SESION
  REGISTRO_USUARIO
  ACTUALIZAR_PERFIL
  ACTIVAR_2FA
  DESACTIVAR_2FA
}

model Transaction {
  id              Int             @id @default(autoincrement())
  transactionType TransactionType
  amount          Float
  description     String
  date            DateTime
  user            User            @relation(fields: [userId], references: [id])
  userId          Int
}

model ActivityLog {
  id     Int        @id @default(autoincrement())
  action ActionType
  date   DateTime
  user   User       @relation(fields: [userId], references: [id])
  userId Int
}
